echo 
echo 
echo ......................................................
echo Instalando o PHP
echo ......................................................

versaophp=7.4
caminhophpini=/etc/php/$versaophp/apache2/php.ini

#Adicionando ppa
add-apt-repository ppa:ondrej/php  
apt update

#Pacotes principais do PHP
apt install -y php libapache2-mod-php php-mysql php-cli

#Instalando extensões adicionais comuns do PHP
apt install -y php$versaophp-curl php$versaophp-gd php$versaophp-mbstring php$versaophp-xml php$versaophp-xmlrpc php$versaophp-soap php$versaophp-intl php$versaophp-zip php$versaophp-libsodium php$versaophp-imagick php$versaophp-bcmath

#Outras extensões do PHP
apt install -y libphp-phpmailer #para envio de email
apt install -y php$versaophp-imap php-mcrypt #outros modulos uteis a ajustar


#Configurando o index.php como arquivo preferencial
sed -i "s+DirectoryIndex index.html index.cgi index.pl index.php index.xhtml index.htm+DirectoryIndex index.php index.html index.cgi index.pl index.xhtml index.htm+g" /etc/apache2/mods-enabled/dir.conf
    
#Aumentar limites do php.ini
sed -i "s+upload_max_filesize = 2M+upload_max_filesize = 256M+g" $caminhophpini
sed -i "s+post_max_size = 8M+post_max_size = 256M+g" $caminhophpini
sed -i "s+max_execution_time = 30+max_execution_time = 600+g" $caminhophpini
sed -i "s+; max_input_vars = 1000+max_input_vars = 2000+g" $caminhophpini

#Reiniciar o apache
systemctl restart apache2








